---
title: "Module: Key FHIR Resources"
author: "Shaumik Ashraf"
format: html
editor: visual
toc: true
tbl-colwidths: [25,75]
---

<!--# DISCUSS

Overall comments:
- watch the technical complexity of the language you use. Sometimes it reads like it's written for software developers. Many of the readers will not be that technical.
- many sentences are overly complex. Take a critical look to see what words and phrases aren't necessary, and where sentences can be reorganized to be more direct. Start with adverbs and sentences with multiple commas.

--LDC
-->

::: {.callout-tip}
## Key points

 - Key FHIR resources include Patient, Observation, and Bundle
 - FHIR resources are defined with great granularity and flexibility
 - FHIR encapsulates metadata as resources for autoconfiguration and dynamic programming
:::

<!--# DISCUSS ooh! I like this format ^. But it's different from everyone else is doing. Need to figure out a consistent approach. --LDC -->

## Overview of core elements

<!--# DISCUSS needs more definition of what a resource is or a link to an existing module that defines it simply --LDC  -->
Recall that FHIR stands for _Fast Healthcare Interoperability **Resources**_. The FHIR core v4.3.0 (also known as Revision 4B, or R4B) defines [140 resources](https://hl7.org/fhir/R4B/resourcelist.html) that are the building blocks for healthcare interoperability. The [HL7 FHIR website](https://hl7.org/fhir) gives a well structured summary of the FHIR core:

![The classification levels for FHIR core.](images/fhir-index.png)

As shown above the FHIR Core is tiered into 5 levels. Levels 1 and 2 define data types, encodings, and other infrastructure required to implement FHIR. <!--# FIX use phrase other than "lower levels". I'm a visual person, so I thought 'lower' in the diagram, so levels 4 and 5. You meant lower like lower numbers: levels 1 and 2. --LDC --> Higher levels begin to encapsulate clinical information, with level 3 defining intuitive resources such as `Patient` and level 5 representing clinical workflows or medical knowledge with the intended use of Clinical Decision Support.

A resource may be encoded in JSON, XML, or [Turtle](https://en.wikipedia.org/wiki/Turtle_(syntax))<!--# FIX link JSON and XML also --LDC --> with processing done by any programming language or software tool. The FHIR standard and resource specifications are for defining the semantics necessary to transfer clinical information. FHIR is granular enough to capture the miniscule pieces of information, but also flexible enough to work with a variety of medical use cases and data collection pipelines already in place. A resource can also extend itself to encompase new discoveries, profile itself for more specific use cases, define metadata for powerful autoconfiguration, and carry human-readible data for manual stewardship. These resources fully follow [object oriented principles](https://hl7.org/fhir/R4B/resourcelist.html).

To understand how FHIR accomplishes this, let us examine the [Patient](https://hl7.org/fhir/patient.html) resource.


## Patient resource
<!--# DISCUSS

As organized, this is confusing. This section is more about the different types than it is about the Patient resource. It also follows a different format than the other "X resource" sections.

I appreciate using the Patient resource as a learning tool for these different types.

Maybe retitle as "Understanding the FHIR structure table and core types through the Patient resource" (or something similar but shorter)

And make it clearer in the body text that you'll be using the Patient resource as an example to learn about these concepts.

--LDC
-->

Here is a [FHIR structure table](https://hl7.org/fhir/formats.html#table) for [Patient](https://hl7.org/fhir/patient.html#resource):

![The structure for the Patient FHIR resource.](images/fhir-patient-structure.png)

The table can be interpreted as follows:

 - **Name:** The attribute name.
 - **Flags:** Special markers that carry information required for implementers. For example, **`N`** means the resource is normative, which is the highest degree of officiality in the FHIR standard. <!--# what do ?! and epsilon mean? Maybe note that normative/STU levels are only at the resource level and the other flags have different meanings. --LDC -->
 - **Card.:** The cardinality of the attribute in format `{minimum}..{maximum}`. For example, `0..*` implies zero to any possible number of values and `1..1` implies exactly 1 required element.
 - **Type:** The primitive or complex [data type](https://hl7.org/fhir/datatypes.html), where a complex data type is another resource. Note in the first row that Patient also has a type, which gives inheritence of additional attributes we'll discuss [below](#inherited-attributes).<!--# FIX use word other than 'inheritance' or give a quick definition. 'inheritance' is too technical here. --LDC -->
 - **Description & Constraints:** A human-targeted explanation of the attribute, but may also contain key constraints that must be enforced by implementors. Constraints may be formally defined through [FHIRPath](https://hl7.org/fhir/fhirpath.html). 

Once you gain familiarity with FHIR, reading the corresponding table will give all the information you need to utilize a resource. FHIR is also designed so that drafting or publishing a standard automatically generates the table and additional documentation. If you can thoroughly understand the Patient resource, then you can understand the majority of FHIR resources.

<!--# FIX Add an intro para for below. I didn't realize at first that each of these subsections related to different attribute types found in Patient, and that Patient was being used to explain the different types. 

Maybe something like:
FHIR Resources are made up of the following types:
<list>
You can understand each type within the context of the Patient Resource.
--LDC -->

<!--# DISCUSS do basic types like bools/ints/etc need to be included in this (as just Basic Types, not each as their own section) --LDC -->
### Complex types - `Patient.name`

`Patient.name` is of complex type [HumanName](https://hl7.org/fhir/datatypes.html#HumanName). Complex types are just resources, and have their own structure table accordingly:

![The structure for `Patient.name` and HumanName](images/fhir-human-name-structure.png)

Here you can see the granularity of FHIR. HumanName is designed to capture any and all possible circumstances, from temporary pseudonyms to case studies on Pieter van de Heuvel. <!--# FIX confusing. TODO provide more comments --LDC --> At the same time it is also very flexible with no required attributes and a few array attributes such as `HumanName.given`. Excluding the other Patient attributes for a moment, the name Pieter van de Heuvel would be represented in JSON as:

```json
{
  ...
  "name": [
    {
      "use": "usual",
      "family": "van de Heuvel",
      "given": [
        "Pieter"
      ],
      "suffix": [
        "MSc"
      ]
    }
  ],
  ...
}
```

At first glance it may seem that "van de" could ambigiously be placed in `Patient.name.family` string or `Patient.name.given` array, but in reality the two carry different semantics. The patient and organization consider "van de Heuvel" as the entire last name, while middle names would be placed in the `Patient.name.given` array. Thus FHIR ensures the semantics of each token of information is not lost in establishing interoperability. Often, context-based [implementation guides (IGs)](/modules/30-fhir-data-modeling--real-world-ig/) and [resource profiles](https://hl7.org/fhir/profiling.html) will further clarify the semantics in a real-world use case.


### Choice types - `Patient.deceased[x]`

[Choice types](https://hl7.org/fhir/formats.html#choice) are the FHIR specification for fields that can have more than one type. These are also called polymorphic attributes or union fields.<!--# FIX 'polymorphic attributes or union fields' too technical. I added a suggestion. Are 'polymorphic attributes or union fields' used officially at hl7? if not, I would drop entirely. --LDC --> For example, Patient can contain either `Patient.deceasedBoolean` or `Patient.deceasedDateTime` but not both, and the former must have a boolean value while the latter must have a datetime value. (Note: that `deceased[x]` is **only** used in documentation, and never in actual data <!--# FIX what does this mean? How is it never used in actual data? --LDC -->). In this way FHIR can capture the semantics that "a patient passed away" and provide interoperability between healthcare systems that record the event as a boolean flag or a timestamp.

In general choice type attributes are always the attribute name concatenated with its value type in [Camel Case](https://en.wikipedia.org/wiki/Camel_case). It is possible for a single database to have records that switch between the selected type, and an application that can successfully fetch a resource with choice types must be able to support all possible values. A choice type attribute can be implemented in any way and FHIR libraries exist to take care of it, but a processing script or data pipeline should also account for any and all possible values.
<!--# DISCUSS
As a researcher who wants to process FHIR resources, choice types would be very important for me to understand (and would probably make me think "are you kidding me?!?")

Perhaps provide:
- link to code example of handling choice types and representing the resource
- how to tell something is a choice type in the structure table (might seem obvious to you, but good to point out)

--LDC
-->

### Codeable concepts - `Patient.maritalStatus`

`Patient.maritalStatus` is a [CodeableConcept](http://hl7.org/fhir/datatypes.html#CodeableConcept) which is commonly used in FHIR. Codeable Concepts are a complex type that bind an attribute to a specific terminology, value set, or health informatics standard such as ICD codes. In this case the attribute is bound to the [Marital Status Codes Value Set](http://hl7.org/fhir/valueset-marital-status.html).

See our [terminology module](/modules/10-intro--terminology-introduction/) for how these work.


### Inherited attributes

Recall in the first row of the Patient structure table, Patient itself was assigned to the type [DomainResource](http://hl7.org/fhir/domainresource.html). This means that DomainResource is the parent of Patient and all its attributes (and constraints) are inherited.<!--# DISCUSS do we expect researchers to understand "inherited" in this context? --LDC --> DomainResource is also the child of [Resource](http://hl7.org/fhir/resource.html), which is the base of almost all Interoperability Resources<!--# FIX should this be 'FHIR resources'? --LDC -->. Below are the structure tables for [Resource](https://hl7.org/fhir/resource.html#resource) and [DomainResource](http://hl7.org/fhir/domainresource.html#resource) respectively.

![](images/fhir-resource-structure.png){fig-alt="Resource, which is the grandparent of Patient, provides attributes id:string, meta:Meta, implicitRules:uri, language:code."}

![](images/fhir-domain-resource-structure.png){fig-alt="DomainResource, which is the parent of Patient, provides attributes text:Narrative, contained:Resource, extension:Extension, and modifierExtension:Extension."}


In essence, all domain resources such as Patient or Condition will have an `id` attribute (a string, usually a [uuid](https://en.wikipedia.org/wiki/Universally_unique_identifier) to uniquely refer to it), a `meta` attribute to store metadata such as implementation guide conformance, `text` to store a human-targeted narrative, and `extension` to store additional data if needed.


### A patient example

To summarize everything about the Patient resource into practice, here is an [anonymized example](https://hl7.org/fhir/patient-example-f001-pieter.json.html) from the real world in JSON:

<!--# DISCUSS
All examples are JSON. Should an XML example be included as well?
--LDC
-->

```json
{
  "resourceType": "Patient",
  "id": "f001",
  "text": {
    "status": "generated",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Pieter van de Heuvel </b> male, DoB: 1944-11-17 ( id: 738472983 (USUAL))</p></div>"
  },
  "identifier": [
    {
      "use": "usual",
      "system": "urn:oid:2.16.840.1.113883.2.4.6.3",
      "value": "738472983"
    },
    {
      "use": "usual",
      "system": "urn:oid:2.16.840.1.113883.2.4.6.3"
    }
  ],
  "active": true,
  "name": [
    {
      "use": "usual",
      "family": "van de Heuvel",
      "given": [
        "Pieter"
      ],
      "suffix": [
        "MSc"
      ]
    }
  ],
  "telecom": [
    {
      "system": "phone",
      "value": "0648352638",
      "use": "mobile"
    },
    {
      "system": "email",
      "value": "p.heuvel@gmail.com",
      "use": "home"
    }
  ],
  "gender": "male",
  "birthDate": "1944-11-17",
  "deceasedBoolean": false,
  "address": [
    {
      "use": "home",
      "line": [
        "Van Egmondkade 23"
      ],
      "city": "Amsterdam",
      "postalCode": "1024 RJ",
      "country": "NLD"
    }
  ],
  "maritalStatus": {
    "coding": [
      {
        "system": "http://terminology.hl7.org/CodeSystem/v3-MaritalStatus",
        "code": "M",
        "display": "Married"
      }
    ],
    "text": "Getrouwd"
  },
  "multipleBirthBoolean": true,
  "contact": [
    {
      "relationship": [
        {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/v2-0131",
              "code": "C"
            }
          ]
        }
      ],
      "name": {
        "use": "usual",
        "family": "Abels",
        "given": [
          "Sarah"
        ]
      },
      "telecom": [
        {
          "system": "phone",
          "value": "0690383372",
          "use": "mobile"
        }
      ]
    }
  ],
  "communication": [
    {
      "language": {
        "coding": [
          {
            "system": "urn:ietf:bcp:47",
            "code": "nl",
            "display": "Dutch"
          }
        ],
        "text": "Nederlands"
      },
      "preferred": true
    }
  ],
  "managingOrganization": {
    "reference": "Organization/f001",
    "display": "Burgers University Medical Centre"
  }
}
```

Note that all JSON resources will begin with `resourceType: <resource>` to indicate what resource it is. In XML it would simply be `<Patient> ... </Patient>`.

Processing a FHIR Patient resource means processing the above JSON (or alternative encoding) in accordance with the defined Patient structure for your purposes<!--DISCUSS mention implementation guide here? --LDC -->. The above example should give you an idea of what a FHIR Patient resource is and how it contains healthcare data. [More Patient examples](https://hl7.org/fhir/patient-examples.html) are available with the official Patient documentation.


## Observation resource

Another prominent FHIR resource is [Observation](https://hl7.org/fhir/observation.html), which can capture vital signs, laboratory data, imaging results, clinical findings, device measurements, and much more. Just like the Patient resource, there is an [Observation structure table](http://hl7.org/fhir/observation.html#resource).

![](images/fhir-observation-structure.png){fig-alt="Observation structure with attributes status:code, code:CodeableConcept, subject:Reference(Patient), and value\[x\]."}
<!--# FIX this seems to be smaller text, etc., than the previous table example. Can this be made the same size/resolution? --LDC -->

Below is a JSON example Observation of high blood glucose levels:

```json
{
  "resourceType": "Observation",
  "id": "f001",
  "text": {
    "status": "generated",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><div style=\"display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%\"><p style=\"margin-bottom: 0px\">Resource &quot;f001&quot; </p></div><p><b>identifier</b>: id: 6323 (OFFICIAL)</p><p><b>status</b>: final</p><p><b>code</b>: Glucose [Moles/volume] in Blood <span style=\"background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki\"> (<a href=\"https://loinc.org/\">LOINC</a>#15074-8)</span></p><p><b>subject</b>: <a href=\"patient-f001.html\">Patient/f001: P. van de Heuvel</a> &quot;Pieter VAN DE HEUVEL&quot;</p><p><b>effective</b>: 2013-04-02T09:30:10+01:00 --&gt; (ongoing)</p><p><b>issued</b>: 04/04/2013 1:30:10 AM</p><p><b>performer</b>: <a href=\"practitioner-f005.html\">Practitioner/f005: A. Langeveld</a> &quot;Langeveld ANNE&quot;</p><p><b>value</b>: 6.3 mmol/l<span style=\"background: LightGoldenRodYellow\"> (Details: UCUM code mmol/L = 'mmol/L')</span></p><p><b>interpretation</b>: High <span style=\"background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki\"> (<a href=\"http://terminology.hl7.org/3.1.0/CodeSystem-v3-ObservationInterpretation.html\">ObservationInterpretation</a>#H)</span></p><h3>ReferenceRanges</h3><table class=\"grid\"><tr><td>-</td><td><b>Low</b></td><td><b>High</b></td></tr><tr><td>*</td><td>3.1 mmol/l<span style=\"background: LightGoldenRodYellow\"> (Details: UCUM code mmol/L = 'mmol/L')</span></td><td>6.2 mmol/l<span style=\"background: LightGoldenRodYellow\"> (Details: UCUM code mmol/L = 'mmol/L')</span></td></tr></table></div>"
  },
  "identifier": [
    {
      "use": "official",
      "system": "http://www.bmc.nl/zorgportal/identifiers/observations",
      "value": "6323"
    }
  ],
  "status": "final",
  "code": {
    "coding": [
      {
        "system": "http://loinc.org",
        "code": "15074-8",
        "display": "Glucose [Moles/volume] in Blood"
      }
    ]
  },
  "subject": {
    "reference": "Patient/f001",
    "display": "P. van de Heuvel"
  },
  "effectivePeriod": {
    "start": "2013-04-02T09:30:10+01:00"
  },
  "issued": "2013-04-03T15:30:10+01:00",
  "performer": [
    {
      "reference": "Practitioner/f005",
      "display": "A. Langeveld"
    }
  ],
  "valueQuantity": {
    "value": 6.3,
    "unit": "mmol/l",
    "system": "http://unitsofmeasure.org",
    "code": "mmol/L"
  },
  "interpretation": [
    {
      "coding": [
        {
          "system": "http://terminology.hl7.org/CodeSystem/v3-ObservationInterpretation",
          "code": "H",
          "display": "High"
        }
      ]
    }
  ],
  "referenceRange": [
    {
      "low": {
        "value": 3.1,
        "unit": "mmol/l",
        "system": "http://unitsofmeasure.org",
        "code": "mmol/L"
      },
      "high": {
        "value": 6.2,
        "unit": "mmol/l",
        "system": "http://unitsofmeasure.org",
        "code": "mmol/L"
      }
    }
  ]
}
```

<!--# FIX make sure your language is simple where possible. The below statement is hard to parse. Here's a quick attempt to simplify it to make it easier to undrestand:

"
Seeing that the JSON object specifies `resourceType` as Observation and using the structure table above, you can interpret the JSON content as follows:
"

Take a look at all of your writing and adjust where necessary. I'll take a closer look at simplifing language in the next round of reviews.
--LDC -->

Once again, the JSON object specifies `resourceType` as Observation. From that token and the above structure table it is evident how the following information is semantically encoded:

 - **`Observation.id = f001`**: the resource id is `f001`. An id only has to be unique per resourceType and FHIR server. See [accessing FHIR data](/modules/10-intro--accessing-fhir-data/) for how to use `id`.
 - **`Observation.text`**: human-targeted text for fallback if FHIR software fails. Although it is usually generated it should be treated as unstructured.<!--# FIX specify it's HTML. I know it's obvious, but for very untech people, 'human-targeted' doesn't look like "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><div..." --LDC -->
 - **`Observation.status = final`**: a _required_ attribute of `coding` type with a value set binding, which is effectively a string-based enumeration. This indicates the observation is finalized.
 - **`Observation.code`**: a _required_ `CodeableConcept`, conforming to a [terminology binding](/modules/10-intro--terminology-introduction/) and providing a [LOINC code](http://hl7.org/fhir/valueset-observation-codes.html).
 - **`Observation.subject`**: a [Reference](http://hl7.org/fhir/references.html#Reference) to another patient resource via `resourceType` and `id`. In this case it is the example Patient from earlier.
 - **`Observation.valueQuantity`**: a supplied `value[x]` choice type with the actual result. In this case they use type [Quantity](http://hl7.org/fhir/datatypes.html#Quantity) to specify blood glucose concentration with units and a universal unit system.


## Bundle resource

In practice, you will seldom find the two example resources above individually. The high-blood glucose observation is useless without a patient it applies too, and there is no purpose for a patient in a healthcare workflow unless it has an observed medical problem. Thus you will usually find multiple FHIR instances together in one package - a [Bundle](https://hl7.org/fhir/bundle.html) resource. Here is the [structure for Bundle](https://hl7.org/fhir/bundle.html#resource):

![Bundle Resource](images/fhir-bundle-structure.png)

and a Bundle instance incorporating the previous examples:

```json
{
  "resourceType": "Bundle",
  "type": "collection",
  "entry": [
    {
      "resource": {
        "resourceType": "Patient",
        "id": "f001",
        "text": {
          "status": "generated",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Pieter van de Heuvel </b> male, DoB: 1944-11-17 ( id: 738472983 (USUAL))</p></div>"
        },
        "identifier": [
          {
            "use": "usual",
            "system": "urn:oid:2.16.840.1.113883.2.4.6.3",
            "value": "738472983"
          },
          {
            "use": "usual",
            "system": "urn:oid:2.16.840.1.113883.2.4.6.3"
          }
        ],
        "active": true,
        "name": [
          {
            "use": "usual",
            "family": "van de Heuvel",
            "given": [
              "Pieter"
            ],
            "suffix": [
              "MSc"
            ]
          }
        ],
        "telecom": [
          {
            "system": "phone",
            "value": "0648352638",
            "use": "mobile"
          },
          {
            "system": "email",
            "value": "p.heuvel@gmail.com",
            "use": "home"
          }
        ],
        "gender": "male",
        "birthDate": "1944-11-17",
        "deceasedBoolean": false,
        "address": [
          {
            "use": "home",
            "line": [
              "Van Egmondkade 23"
            ],
            "city": "Amsterdam",
            "postalCode": "1024 RJ",
            "country": "NLD"
          }
        ],
        "maritalStatus": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/v3-MaritalStatus",
              "code": "M",
              "display": "Married"
            }
          ],
          "text": "Getrouwd"
        },
        "multipleBirthBoolean": true,
        "contact": [
          {
            "relationship": [
              {
                "coding": [
                  {
                    "system": "http://terminology.hl7.org/CodeSystem/v2-0131",
                    "code": "C"
                  }
                ]
              }
            ],
            "name": {
              "use": "usual",
              "family": "Abels",
              "given": [
                "Sarah"
              ]
            },
            "telecom": [
              {
                "system": "phone",
                "value": "0690383372",
                "use": "mobile"
              }
            ]
          }
        ],
        "communication": [
          {
            "language": {
              "coding": [
                {
                  "system": "urn:ietf:bcp:47",
                  "code": "nl",
                  "display": "Dutch"
                }
              ],
              "text": "Nederlands"
            },
            "preferred": true
          }
        ],
        "managingOrganization": {
          "reference": "Organization/f001",
          "display": "Burgers University Medical Centre"
        }
      }
    },
    {
      "resource": {
        "resourceType": "Observation",
        "id": "f001",
        "text": {
          "status": "generated",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><div style=\"display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%\"><p style=\"margin-bottom: 0px\">Resource &quot;f001&quot; </p></div><p><b>identifier</b>: id: 6323 (OFFICIAL)</p><p><b>status</b>: final</p><p><b>code</b>: Glucose [Moles/volume] in Blood <span style=\"background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki\"> (<a href=\"https://loinc.org/\">LOINC</a>#15074-8)</span></p><p><b>subject</b>: <a href=\"patient-f001.html\">Patient/f001: P. van de Heuvel</a> &quot;Pieter VAN DE HEUVEL&quot;</p><p><b>effective</b>: 2013-04-02T09:30:10+01:00 --&gt; (ongoing)</p><p><b>issued</b>: 04/04/2013 1:30:10 AM</p><p><b>performer</b>: <a href=\"practitioner-f005.html\">Practitioner/f005: A. Langeveld</a> &quot;Langeveld ANNE&quot;</p><p><b>value</b>: 6.3 mmol/l<span style=\"background: LightGoldenRodYellow\"> (Details: UCUM code mmol/L = 'mmol/L')</span></p><p><b>interpretation</b>: High <span style=\"background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki\"> (<a href=\"http://terminology.hl7.org/3.1.0/CodeSystem-v3-ObservationInterpretation.html\">ObservationInterpretation</a>#H)</span></p><h3>ReferenceRanges</h3><table class=\"grid\"><tr><td>-</td><td><b>Low</b></td><td><b>High</b></td></tr><tr><td>*</td><td>3.1 mmol/l<span style=\"background: LightGoldenRodYellow\"> (Details: UCUM code mmol/L = 'mmol/L')</span></td><td>6.2 mmol/l<span style=\"background: LightGoldenRodYellow\"> (Details: UCUM code mmol/L = 'mmol/L')</span></td></tr></table></div>"
        },
        "identifier": [
          {
            "use": "official",
            "system": "http://www.bmc.nl/zorgportal/identifiers/observations",
            "value": "6323"
          }
        ],
        "status": "final",
        "code": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "15074-8",
              "display": "Glucose [Moles/volume] in Blood"
            }
          ]
        },
        "subject": {
          "reference": "Patient/f001",
          "display": "P. van de Heuvel"
        },
        "effectivePeriod": {
          "start": "2013-04-02T09:30:10+01:00"
        },
        "issued": "2013-04-03T15:30:10+01:00",
        "performer": [
          {
            "reference": "Practitioner/f005",
            "display": "A. Langeveld"
          }
        ],
        "valueQuantity": {
          "value": 6.3,
          "unit": "mmol/l",
          "system": "http://unitsofmeasure.org",
          "code": "mmol/L"
        },
        "interpretation": [
          {
            "coding": [
              {
                "system": "http://terminology.hl7.org/CodeSystem/v3-ObservationInterpretation",
                "code": "H",
                "display": "High"
              }
            ]
          }
        ],
        "referenceRange": [
          {
            "low": {
              "value": 3.1,
              "unit": "mmol/l",
              "system": "http://unitsofmeasure.org",
              "code": "mmol/L"
            },
            "high": {
              "value": 6.2,
              "unit": "mmol/l",
              "system": "http://unitsofmeasure.org",
              "code": "mmol/L"
            }
          }
        ]
      }
    }
  ]
}
```

The Bundle resource has:

 - **`Bundle.type = collection`:** specify that this Bundle is a collection of resources. Alternatives include `document` or `transaction`.
 - **`Bundle.entry`:** an array of Bundle entries. Each entry is a [BackboneElement](http://hl7.org/fhir/backboneelement.html) which the FHIR counterpart to a structured map or named dictionary. <!--# FIX define "backbone element" --LDC -->
 - **`Bundle.entry[i].resource`:** the actual resource contained within the entry.

In some cases you may receive a bundle with one or zero entries if the context calls for it. For example a [FHIR query](http://127.0.0.1:3000/modules/10-intro--accessing-fhir-data/) is expected to return a varied number of resources, so the server executing the query will return a bundle regardless of the count.


## Capability statement resource

A [CapabilityStatement](https://hl7.org/fhir/capabilitystatement.html) is a resource that contains metadata about a FHIR server, including what other resources the server hosts and how to access them. Here we skip the [CapabilityStatment structure table](https://hl7.org/fhir/capabilitystatement.html#resource)<!--FIX why? too complicated? they get it already? give some sort of reason --LDC --> and look directly at an example:

```json
{
  "resourceType" : "CapabilityStatement",
  "version" : "4.3.0",
  "name" : "Example FHIR Capability Statement",
  "status" : "draft",
  "experimental" : true,
  "date" : "2022-05-28T12:47:40+10:00",
  "kind" : "capability",
  "fhirVersion" : "4.3.0",
  "format" : [
    "xml",
    "json"
  ],
  "implementationGuide": [
    "https://fhir-igs.example.com/example-implementation-guide"
  ],
  "rest" : [
    {
      "mode" : "server",
      "documentation" : "An example Capability Statement",
      "security" : {
        "cors" : true,
        "service" : [{
          "coding" : [{
            "system" : "http://terminology.hl7.org/CodeSystem/restful-security-service",
            "code" : "SMART-on-FHIR",
            "display" : "SMART-on-FHIR"
          }],
          "text" : "See http://docs.smarthealthit.org/"
        }],
        "description" : "This is the Capability Statement to declare that the server supports SMART-on-FHIR. See the SMART-on-FHIR docs for the extension that would go with such a server"
      },
      "resource" : [
        {
          "type" : "Patient",
          "interaction" : [
            { "code" : "read" },
            {
              "code" : "search-type",
              "documentation" : "When a client searches patients with no search criteria, they get a list of all patients they have access too. Servers may elect to offer additional search parameters, but this is not required"
            }
          ]
        },
        {
          "type" : "DocumentReference",
          "interaction" : [
            { "code" : "read" },
            { "code" : "search-type" }
          ],
          "searchParam" : [{
            "name" : "_id",
            "type" : "token",
            "documentation" : "_id parameter always supported. For the connectathon, servers may elect which search parameters are supported"
          }]
        },
        {
          "type" : "Condition",
          "interaction" : [
            { "code" : "read" },
            { "code" : "search-type" }
          ],
          "searchParam" : [{
            "name" : "_id",
            "type" : "token",
            "documentation" : "Standard _id parameter"
          }]
        },
        {
          "type" : "DiagnosticReport",
          "interaction" : [
            { "code" : "read" },
            { "code" : "search-type" }
          ],
          "searchParam" : [
            {
              "name" : "_id",
              "type" : "token",
              "documentation" : "Standard _id parameter"
            },
            {
              "name" : "service",
              "type" : "token",
            "documentation" : "which diagnostic discipline/department created the report"
            }
          ]
        }
      ]
    }
  ]
}
```

Some things automatically discoverable from the CapabilityStatement are:

 - **`CapabilityStatement.url`:** the base URI for the FHIR server. Technically this could also be the URI to the capability statement itself, which would include the base URI for the server.
 - **`CapabilityStatement.fhirVersion`:** the FHIR version to which the API conforms to. In this case the server is running FHIR 4.3.0 (also known as FHIR R4B) **at that base url**. It is possible for a FHIR server to service multiple FHIR versions, but then each FHIR API will be serviced at a different base url, for example FHIR R4 at <https://fhir.example.com/R4/> and FHIR R4B at <https://fhir.example.com/R4B/>.
 - **`CapabilityStatement.format`:** the [encoding formats](https://hl7.org/fhir/formats.html#wire) supported by the FHIR server. [FHIR queries](/modules/10-intro--accessing-fhir-data/) must specify one of these formats via the [HTTP `Accept` Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept).
 - **`CapabilityStatement.implementationGuide`:** the [implementation guides (IG)](/modules/30-fhir-data-modeling--real-world-ig/) that the FHIR server conforms to. However, it is technically possible for a server to be partially or even fully compliant to an IG without listing it in the metadata.
 - **`CapabilityStatement.rest[i].security.service`:** the [RESTful security services](http://hl7.org/fhir/valueset-restful-security-service.html#expansion) required to access data on this server as a `CodeableConcept`. This example uses [SMART-on-FHIR](/modules/20-intro-smart-on-fhir--overview/), but other possiblities include [OAuth](https://oauth.net/) or [UDAP](https://www.udap.org/).
 - **`CapabilityStatement.rest[i].resource.type`:** all FHIR resources supported by the server. Note this does not include foundational resources such as CapabilityStatement or Bundle, but all resources [level 3 and higher](https://hl7.org/fhir).
 - **`CapabilityStatement.rest[i].resource.interaction`:** the [RESTful interactions](http://hl7.org/fhir/http.html) available for that resource. All possible interactions are divided into 3 categories: instance level, type level, and system level<!--# FIX provide links for definitions for these 3 categories --LDC -->. Only instance and type level interactions are listed here, and they apply to a specific FHIR resource instance or the entire FHIR resource class respectively. The [`search`](http://hl7.org/fhir/http.html#search) interaction applies to type level, and the `CapabilityStatement.rest[i].resource.searchParam` field further specifies what search parameters are possible.

In this way the CapabilityStatement creates a powerful way to encapsulate the metadata on how to retrieve and access more applicable FHIR data. All FHIR servers **must** have a capability statement, and it must be available at the `/metadata` route. This allows any client or user to automatically configure themselves for information exchange. A trained person can also gleam at a CapabilityStatement to understand the capabilities of a FHIR server or FHIR-conformant digital healthcare service. This auto-configuration or auto-discovery power is key advantage FHIR brings to healthcare.

Strictly speaking there are also other uses of CapabilityStatement such as being FHIR client metadata or a requirements statement. However the representation of metadata at a well-known endpoint for a FHIR server is its most common use case, and usually the go-to when beginning a FHIR-involved project or interaction.


## Other major resources

By now, you probably understand how to read FHIR resources - look at the structure table and parse the provided encoding appropriately. <!--# DISCUSS should implementation guides be discussed more here? The structure table only tells part of the story. --LDC -->Here a few more common and key FHIR resources:

| FHIR resource                        | Description                                                                                                                     |
|:------------------------------------:|:--------------------------------------------------------------------------------------------------------------------------------|
| [Condition](https://hl7.org/fhir/condition)                     | A problem, diagnosis, or clinical event. It is expected to be the reason for a medical intervention and tie into a larger [clinical workflow](http://hl7.org/fhir/workflow.html). There is some use-case overlap with `Observation`, for which an [IG](/modules/30-fhir-data-modeling--real-world-ig/) will provide better guidance. |
| [Procedure](https://hl7.org/fhir/procedure)                     | A medical activity preformed on a patient, such as surgery, diagnostic procedures, or therapy. It is expected to be a part of a clinical workflow. |
| [Practitioner](https://hl7.org/fhir/practitioner)               | Any individual providing healthcare or a related service, from physicians to receptionists to service animals. |
| [Organization](https://hl7.org/fhir/organization)               | Any formal or informal group of entities acting towards a collective cause, such as hospitals, departments, corporations, or health insurance groups. |
| [Composition](https://hl7.org/fhir/composition)                 | A set of FHIR resources that create a single coherent clinical statement, and usually acts as the skeleton for a [document](http://hl7.org/fhir/documents.html). This is typically used in conjunction with a Bundle. |
| [Extension](https://hl7.org/fhir/extension)                     | A FHIR resource composed of a definitive URL and a `Extension.value[x]` of any type. Almost all resources inherit this from `DomainResource.extension` and an IG should provide a specification for how it is used. |
| [StructureDefinition](https://hl7.org/fhir/structuredefinition) | A FHIR resource that defines other FHIR resources. An instance exists for all FHIR resources, which allows for powerful dynamic programming and automated documentation. |
| [OperationDefinition](https://hl7.org/fhir/operationdefinition) | A FHIR resource that defines [FHIR operations](http://hl7.org/fhir/operations.html) in addition to traditional REST operations, that conventionally being with a dollar sign (`$`). For example, `https://fhir.example.com/Patient/$match` will preform a [patient matching operation](http://hl7.org/fhir/patient-operation-match.html). This resource also allows for powerful dynamic programming for FHIR operations. |

<!--# FIX include references/bibliography --LDC -->